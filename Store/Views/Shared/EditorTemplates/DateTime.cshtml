 @using System.Globalization
    @using System.Net.Mime
    @using Microsoft.Ajax.Utilities
    @model System.DateTime?
    @{
        
        var otherId = ViewData.TemplateInfo.GetFullHtmlFieldId(string.Empty) + "fa";
        var otherName = ViewData.TemplateInfo.GetFullHtmlFieldName(string.Empty) + "fa";

    }
    @functions
{

        string ConvertAdToJalali(DateTime date)
        {
            var miladi = date;
            var shamsi = new System.Globalization.PersianCalendar();

            return string.Format("{0}/{1}/{2}", shamsi.GetYear(miladi), shamsi.GetMonth(miladi), shamsi.GetDayOfMonth(miladi));

        }
        string ConvertJalaliToAd(string date)
        {
            DateTime dt = DateTime.ParseExact(date, "dd/MM/yyyy", CultureInfo.InvariantCulture);
            //var jalali = date;
            var jalali = new DateTime(dt.Year, dt.Month, dt.Day, new PersianCalendar());
            //var ad = new System.Globalization.PersianCalendar();
            return string.Format("{0}/{1}/{2}", jalali.Year, jalali.Month, jalali.Day);

        }

    }
<style>
    .input-group.date .input-group-addon i{
        cursor: pointer;
width: 16px;
height: 16px;
    }
</style>
  
  
        <input type="hidden" id="@ViewData.TemplateInfo.GetFullHtmlFieldId(string.Empty)" name="@ViewData.TemplateInfo.GetFullHtmlFieldName(string.Empty)" value="@(Model > DateTime.MinValue || Model!=null ? Model.Value.ToShortDateString() : DateTime.Now.ToShortDateString())")" />
<input type="hidden" id="@ViewData.TemplateInfo.GetFullHtmlFieldId(string.Empty)" name="@ViewData.TemplateInfo.GetFullHtmlFieldName(string.Empty)" value="@(Model > DateTime.MinValue || Model!=null ? Model.Value.ToShortDateString() : DateTime.Now.ToShortDateString())" />

   

<div class="input-group date">
    @*<span class="input-group-addon datepickerbtn" id="datepickerbtn@(otherId)"><i class="fa fa-calendar"></i></span>*@
    <input id="@otherId" name="@otherName" value="@(Model!=null ? ConvertAdToJalali(Model.Value) : ConvertAdToJalali(DateTime.Now))" class="form-control" type="text" />

    <span class="input-group-addon" datepickerbtn" id="datepickerbtn@(otherId)"><i class="icon-calender"></i></span>

</div>
       
        <script>
            jQuery(function ($) {
                $('#@(otherId)').datepicker({
                    showButtonPanel: true,
                    isRTL: true,
                    dateFormat: "yy/mm/dd",
                    changeMonth: true,
                    changeYear: true,
                    //minDate: 0,
                    //maxDate: "0"
                });
                $("#datepickerbtn@(otherId)").click(function (event) {
                    event.preventDefault();
                    $("#@(otherId)").focus();
                });
                $('#@(otherId)').change(function () {
                    $.ajax({
                        url: '/Common/ConvertJalaliToAd',
                        data: { 'date': $('#@(otherId)').val() },
                        type:"GET",
                        success: function (data) {

                            $("#@ViewData.TemplateInfo.GetFullHtmlFieldId(string.Empty)").val(data);
                        },
                        error: function () {


                        }

                    });
                });


            });
        </script>
    

